<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../css/Stylesheet_encriptador_de_texto.css" />
    <title>Encriptador de Texto</title>
  </head>
  <body>
    <div id="main">
      <img class="logo" src="../imagenes/Logo-1.png" alt="Logo_Alura" />
      <div id="panel_entrada">
        <textarea
          id="texto_entrada"
          placeholder="Ingrese un texto para encriptar/desencriptar"
          rows="20"
          cols="30"
          maxlength="512"
        ></textarea>
        <p>Nota: no ingrese caracteres especiales</p>
        <div id="panel_botones">
          <button id="boton_encriptador">Encriptar</button>
          <button id="boton_desencriptador">Desencriptar</button>
        </div>
      </div>
      <div id="panel_salida">
        <textarea
          type="textarea"
          disabled
          id="texto_salida"
          rows="20"
          cols="30"
        ></textarea>
        <img
          id="imagen_muneco"
          src="../imagenes/Muñeco.png"
          alt="imagen_Muñeco"
        />
        <p id="mensaje_no_encontrado">Ningún mensaje fue encontrado</p>
        <p id="mensaje_recomendacion">
          Ingrese el texto que quiera encriptar o desencriptar
        </p>
        <button id="boton_copiar">Copiar texto</button>
      </div>
    </div>

    <footer>Este programa fue desarrollado por Martín Javier Bilbao.</footer>
  </body>
  <script>
    var textoEntrada = document.querySelector("#texto_entrada");
    var textoSalida = document.querySelector("#texto_salida");
    var botonCopiar = document.querySelector("#boton_copiar");
    var buttonEncriptar = document.querySelector("#boton_encriptador");
    var buttonDesencriptar = document.querySelector("#boton_desencriptador");

    buttonEncriptar.onclick = encriptar;
    buttonDesencriptar.onclick = desencriptar;
    botonCopiar.onclick = copiar;

    function encriptar() {
      var regex = /e/g;
      textoEntrada.value = textoEntrada.value.replace(regex, "enter");
      regex = /i/g;
      textoEntrada.value = textoEntrada.value.replace(regex, "imes");
      regex = /a/g;
      textoEntrada.value = textoEntrada.value.replace(regex, "ai");
      regex = /o/g;
      textoEntrada.value = textoEntrada.value.replace(regex, "ober");
      regex = /u/g;
      textoEntrada.value = textoEntrada.value.replace(regex, "ufat");
      if(textoEntrada.value!=""){
        ocultarMuneco();
      textoSalida.value = textoEntrada.value;
      textoEntrada.value = "";
      }
    }

    function desencriptar() {
      var regex = /enter/g;
      textoEntrada.value = textoEntrada.value.replace(regex, "e");
      regex = /imes/g;
      textoEntrada.value = textoEntrada.value.replace(regex, "i");
      regex = /ai/g;
      textoEntrada.value = textoEntrada.value.replace(regex, "a");
      regex = /ober/g;
      textoEntrada.value = textoEntrada.value.replace(regex, "o");
      regex = /ufat/g;
      textoEntrada.value = textoEntrada.value.replace(regex, "u");
      if(textoEntrada.value!=""){
        ocultarMuneco();
      textoSalida.value = textoEntrada.value;
      textoEntrada.value = "";
      }
    }

    function copiar() {
      var range = document.createRange();
      range.selectNode(textoSalida);
      window.getSelection().addRange(range);
      var resultado = document.execCommand("copy");
      console.log(resultado ? "Texto copiado" : "No se pudo copiar el texto");
    }

    function mostrar(texto) {
      document.write(texto);
    }

    function ocultarMuneco() {
      document.getElementById("imagen_muneco").style.display = "none";
      document.getElementById("mensaje_no_encontrado").style.display = "none";
      document.getElementById("mensaje_recomendacion").style.display = "none";
    }
  </script>
</html>
